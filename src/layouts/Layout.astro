---
import AgeVerification from '../components/AgeVerification.astro';

interface Props {
  title?: string;
  description?: string;
}

const {
  title = "Casas de apuestas legales en España 2026 | LegalZone",
  description = "Comparativa de las mejores casas de apuestas con licencia DGOJ en España 2026. Bonos, cuotas, métodos de pago y opiniones verificadas."
} = Astro.props;

const siteUrl = "https://casasdeapuestas.legalzone.es";
const canonicalUrl = "https://casasdeapuestas.legalzone.es";
const currentDate = new Date().toISOString().split('T')[0];
const month = new Date().toLocaleDateString('es-ES', { month: 'long' });

// ── Schema: WebSite ──
const webSiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": `${siteUrl}/#website`,
  "url": siteUrl,
  "name": "LegalZone Bet",
  "description": "Comparador de códigos promocionales y bonos de bienvenida de casas de apuestas legales en España con licencia DGOJ.",
  "publisher": { "@id": `${siteUrl}/#organization` },
  "inLanguage": "es",
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": `${siteUrl}/?q={search_term_string}`
    },
    "query-input": "required name=search_term_string"
  }
};

// ── Schema: Organization ──
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": `${siteUrl}/#organization`,
  "name": "LegalZone",
  "url": "https://legalzone.es",
  "logo": {
    "@type": "ImageObject",
    "url": "https://legalzone.es/wp-content/themes/legalzone/assets/img/legalzone_blanco.webp",
    "width": 180,
    "height": 40
  },
  "sameAs": [
    "https://legalzone.es"
  ],
  "description": "Portal de información verificada sobre casas de apuestas y casinos online legales en España."
};

// ── Schema: WebPage con speakable ──
const webPageSchema = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": `${siteUrl}/#webpage`,
  "url": canonicalUrl,
  "name": title,
  "description": description,
  "isPartOf": { "@id": `${siteUrl}/#website` },
  "about": {
    "@type": "Thing",
    "name": "Códigos promocionales de casas de apuestas en España"
  },
  "inLanguage": "es",
  "datePublished": "2025-12-01",
  "dateModified": currentDate,
  "publisher": { "@id": `${siteUrl}/#organization` },
  "breadcrumb": { "@id": `${siteUrl}/#breadcrumb` },
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": [
      ".section-title",
      ".section-subtitle",
      ".faq-question",
      ".faq-answer",
      ".content-block h2",
      ".content-block p:first-of-type"
    ]
  },
  "mainEntity": {
    "@type": "ItemList",
    "@id": `${siteUrl}/#itemlist`
  }
};

// ── Schema: BreadcrumbList ──
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "@id": `${siteUrl}/#breadcrumb`,
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "LegalZone",
      "item": "https://legalzone.es"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Códigos Promocionales Apuestas",
      "item": siteUrl
    }
  ]
};

// ── Schema: Article (guía) ──
const articleSchema = {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": `Casas de apuestas con códigos promocionales en España 2026`,
  "description": description,
  "image": "https://legalzone.es/wp-content/uploads/2025/12/ico-300x300.png",
  "datePublished": "2025-12-01",
  "dateModified": currentDate,
  "author": { "@id": `${siteUrl}/#organization` },
  "publisher": { "@id": `${siteUrl}/#organization` },
  "mainEntityOfPage": { "@id": `${siteUrl}/#webpage` },
  "inLanguage": "es",
  "about": [
    { "@type": "Thing", "name": "Apuestas deportivas" },
    { "@type": "Thing", "name": "Códigos promocionales" },
    { "@type": "Thing", "name": "Bonos de bienvenida" },
    { "@type": "Thing", "name": "Casas de apuestas España" }
  ],
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": [".content-block h2", ".content-block p:first-of-type"]
  }
};
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="https://legalzone.es/wp-content/uploads/2025/12/ico-300x300.png" />
    <meta name="generator" content={Astro.generator} />

    <!-- SEO -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="es_ES" />
    <meta property="og:site_name" content="LegalZone Bet" />
    <meta property="og:url" content={canonicalUrl} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />

    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json" set:html={JSON.stringify(webSiteSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(organizationSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(webPageSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
    <script type="application/ld+json" set:html={JSON.stringify(articleSchema)} />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet" />

    <script src="https://analytics.ahrefs.com/analytics.js" data-key="z6NOvps5FCs+AKgb6eBj/A" async></script>
  </head>
  <body>
    <AgeVerification />
    <slot />
  </body>
</html>

<style is:global>
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Roboto', sans-serif;
    background-color: #0d0d0d;
    color: #ffffff;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  img {
    max-width: 100%;
    height: auto;
    display: block;
  }

  .container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  h1, h2, h3, h4, h5, h6 {
    line-height: 1.2;
  }
</style>
